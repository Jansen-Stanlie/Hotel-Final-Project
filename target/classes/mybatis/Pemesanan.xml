<?xml version = "1.0" encoding = "UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace = "Pemesanan">
    <insert id = "insert" parameterType = "com.model.Booking">
        INSERT INTO pemesanan (nama_pemesan,username,booking_id,hotel_name,room_type,quantity,jumlah_malam,total_payment,status,tanggal_pemesanan,tanggal_checkin,tanggal_checkout)
        VALUES (#{name},#{username},#{Booking_id},#{hotel_name},#{Room_type},#{Quantity},#{Days},#{Total_payment},#{payment_status},#{today},#{booking_date},#{checkout_date});
        <selectKey keyProperty = "id" resultType = "int" order = "AFTER">
            select last_insert_id() as id
        </selectKey>
    </insert>
        <delete id = "delete" parameterType = "String">
            DELETE FROM pemesanan WHERE username = #{username};
        </delete>
    <insert id = "replace" parameterType = "com.model.Booking">
        INSERT INTO pemesanan (nama_pemesan,username,booking_id,hotel_name,room_type,quantity,jumlah_malam,total_payment,status,tanggal_pemesanan,tanggal_checkin,tanggal_checkout)
        VALUES (#{name},#{username},#{Booking_id},#{hotel_name},#{Room_type},#{Quantity},#{Days},#{Total_payment},#{payment_status},#{today},#{booking_date},#{checkout_date});
    </insert>
    <resultMap id = "bookcheck" type = "com.model.Booking">
        <result property = "username" column = "username"/>
        <result property = "name" column = "nama_pemesan"/>
        <result property = "Booking_id" column = "booking_id"/>
        <result property = "payment_status" column = "status"/>
    </resultMap>
    <select id = "check" parameterType = "String" resultMap = "bookcheck">
        SELECT username,nama_pemesan,booking_id,status from pemesanan WHERE username = #{username};
    </select>
<!--    <update id = "update1" parameterType = "com.model.Siswa">-->
<!--        UPDATE siswas SET nama = #{fullname}, alamat = #{address}, status = #{status} WHERE Id_siswa = #{id};-->
<!--    </update>-->
<!--    <update id = "update2" parameterType = "com.model.Siswa">-->
<!--        UPDATE nilai SET biologi = #{biologi}, physics= #{fisika}, calculus = #{kalkulus} WHERE Id_nilai = #{id};-->
<!--    </update>-->
</mapper>